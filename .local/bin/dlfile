#!/bin/sh

url=$(dragon-drop -t -x)

if [ ! -z "$url" ]; then
	ans=""
	while [ ! "$ans" = "1" ] && [ ! "$ans" = "2" ]; do
		printf "[1] Leave default name | [2] Choose name: "
		read ans
	done

	case "$ans" in
		1) curl -o "${url##*/}" "$url";;

		2)
			printf "File name: "
			name=""
			while [ -z "$name" ]; do
				read name
				if [ -f "$name" ]; then
					printf "File already exists, overwrite (y|n): "
					read ans

					if [ "$ans" = "y" ]; then
						break
					else
						printf "File name: "
						name=""
					fi
				fi
			done

			[ ! -z "$name" ] && curl -o "$name" "$url" || exit;;
	esac
fi
